var b=Object.defineProperty;var _=(a,e,s)=>e in a?b(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s;var o=(a,e,s)=>_(a,typeof e!="symbol"?e+"":e,s);import{O as w,i as v,c as l,f as h,a as y,j as t,b as U,H as E}from"../assets/Header-p9HHJ4Co.js";import{useState as c,useEffect as $}from"react";import"react-dom";function N(a){return new w(function(e){v(a()).subscribe(e)})}class R{constructor(){o(this,"api_base","https://jsonplaceholder.typicode.com");o(this,"AddUser",e=>{let s=`${this.api_base}/users/`;return l.addRow(s,e)});o(this,"deleteUserById",e=>{let s=`${this.api_base}/users/`;return l.deleteRow(s,e)});o(this,"getUserById",e=>{let s=`${this.api_base}/users/`;const d=()=>l.getRowById(s,e);return N(()=>h(d()))});o(this,"getUsers",()=>{let e=`${this.api_base}/users`;return h(l.getRows(e))});o(this,"getUsersNoWait",async()=>{await y(500);let e=`${this.api_base}/users`;const s=await fetch(e);if(!s.ok)throw new Error("Failed to fetch posts");return s.json()});this.initialize()}initialize(){}}var D=new R;function A(){const[a,e]=c([]),[s,d]=c(!0),[u,m]=c(null),[f,p]=c(null);$(()=>{(async()=>{try{const n=await D.getUsersNoWait();e(n.slice(0,5))}catch(n){m(n instanceof Error?n.message:"Failed to load data")}finally{d(!1)}})()},[]);const g=(r,n)=>{r.preventDefault(),r.stopPropagation(),p(n),setTimeout(()=>{const i=a.filter(x=>x.id!==n);console.log("updatedCards=",i),e(i),console.log("users=",a),p(null)},300)};function j(r){return r.length>30?r.substring(0,30)+"...":r}return s?t.jsx("div",{className:"loader",children:"Loading..."}):u?t.jsx("div",{className:"error",children:u}):t.jsxs("main",{children:[t.jsx("h2",{children:"Welcome to Home"}),t.jsx("div",{className:"card-list",children:a.map((r,n)=>t.jsxs("div",{className:`card ${f===r.id?"removing":""}`,children:[t.jsxs("p",{children:[" ",r.id," - ",j(r.name)]}),t.jsxs("h5",{children:[" ",r.username,"$"]}),t.jsxs("h5",{children:[" ",r.email,"$"]}),t.jsx("button",{className:"delete-button",onClick:i=>g(i,r.id),children:"Delete"})]},n))})]})}const I=()=>t.jsxs(t.Fragment,{children:[t.jsx(E,{}),t.jsx(A,{})]}),B=document.getElementById("root"),C=U.createRoot(B);C.render(t.jsx(I,{}));
